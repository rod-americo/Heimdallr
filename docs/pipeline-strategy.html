<!DOCTYPE html>
<!--
  Copyright (c) 2026 Rodrigo Americo

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heimdallr Strategy Board</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg: #070c16;
            --bg-soft: #101a2d;
            --bg-card: #121f36;
            --bg-hover: #1a2a45;
            --text: #e8f0ff;
            --muted: #9eb0ca;
            --accent: #39d0ff;
            --accent-2: #8aa4ff;
            --good: #29c98a;
            --mid: #f3a952;
            --hard: #f56c7c;
            --line: rgba(126, 157, 210, 0.25);
            --chart-text: #c5d4eb;
            --chart-axis: #b8c9e2;
            --chart-grid: rgba(126, 157, 210, 0.18);
            --chart-border: rgba(255, 255, 255, 0.45);
            --radial-1: rgba(57, 208, 255, 0.15);
            --radial-2: rgba(138, 164, 255, 0.10);
            --hero-grad-a: rgba(18, 31, 54, 0.90);
            --hero-grad-b: rgba(10, 18, 32, 0.95);
            --link-text: #d6e8ff;
            --link-bg: #12203a;
            --ring: rgba(57, 208, 255, 0.2);
            --button-bg: #13223b;
            --hover-border: rgba(57, 208, 255, 0.45);
            --pill-foundation-bg: rgba(41, 201, 138, 0.15);
            --pill-foundation-text: #8ef0c2;
            --pill-acceleration-bg: rgba(243, 169, 82, 0.15);
            --pill-acceleration-text: #ffd39f;
            --pill-scaling-bg: rgba(138, 164, 255, 0.2);
            --pill-scaling-text: #c7d4ff;
            --pill-innovation-bg: rgba(245, 108, 124, 0.18);
            --pill-innovation-text: #ffc0c7;
            --bubble-good: rgba(41, 201, 138, 0.7);
            --bubble-mid: rgba(243, 169, 82, 0.7);
            --bubble-hard: rgba(245, 108, 124, 0.75);
            --focus-1: #39d0ff;
            --focus-2: #8aa4ff;
            --focus-3: #f3a952;
            --focus-4: #29c98a;
            --status-implemented-bg: rgba(56, 189, 248, 0.22);
            --status-implemented-text: #c2eeff;
            --status-progress-bg: rgba(57, 208, 255, 0.2);
            --status-progress-text: #b5ecff;
            --status-planned-bg: rgba(148, 163, 184, 0.2);
            --status-planned-text: #d8e2f2;
            --impact-low-bg: rgba(57, 208, 255, 0.16);
            --impact-low-text: #9de7ff;
            --impact-medium-bg: rgba(138, 164, 255, 0.18);
            --impact-medium-text: #d0dcff;
            --impact-high-bg: rgba(168, 121, 255, 0.24);
            --impact-high-text: #ead9ff;
            --friction-high-bg: rgba(245, 108, 124, 0.24);
            --friction-high-text: #ffc3cb;
            --radius: 14px;
            color-scheme: dark light;
        }

        @media (prefers-color-scheme: light) {
            :root {
                --bg: #f3f7ff;
                --bg-soft: #ffffff;
                --bg-card: #f7faff;
                --bg-hover: #eef4ff;
                --text: #0f1b33;
                --muted: #4d6283;
                --accent: #0f87c9;
                --accent-2: #5673d8;
                --good: #1e9f6e;
                --mid: #c67f1d;
                --hard: #c84a59;
                --line: rgba(38, 68, 125, 0.18);
                --chart-text: #304b75;
                --chart-axis: #28446e;
                --chart-grid: rgba(38, 68, 125, 0.12);
                --chart-border: rgba(38, 68, 125, 0.35);
                --radial-1: rgba(15, 135, 201, 0.10);
                --radial-2: rgba(86, 115, 216, 0.08);
                --hero-grad-a: rgba(240, 247, 255, 0.95);
                --hero-grad-b: rgba(233, 242, 255, 0.98);
                --link-text: #12345f;
                --link-bg: #eaf2ff;
                --ring: rgba(15, 135, 201, 0.2);
                --button-bg: #eaf2ff;
                --hover-border: rgba(15, 135, 201, 0.35);
                --pill-foundation-bg: rgba(30, 159, 110, 0.12);
                --pill-foundation-text: #1f7f5a;
                --pill-acceleration-bg: rgba(198, 127, 29, 0.14);
                --pill-acceleration-text: #885400;
                --pill-scaling-bg: rgba(86, 115, 216, 0.14);
                --pill-scaling-text: #344ba7;
                --pill-innovation-bg: rgba(200, 74, 89, 0.14);
                --pill-innovation-text: #8f2f3a;
                --bubble-good: rgba(30, 159, 110, 0.75);
                --bubble-mid: rgba(198, 127, 29, 0.75);
                --bubble-hard: rgba(200, 74, 89, 0.78);
                --focus-1: #0f87c9;
                --focus-2: #5673d8;
                --focus-3: #c67f1d;
                --focus-4: #1e9f6e;
                --status-implemented-bg: rgba(14, 116, 144, 0.12);
                --status-implemented-text: #0d5d73;
                --status-progress-bg: rgba(15, 135, 201, 0.12);
                --status-progress-text: #0f5f99;
                --status-planned-bg: rgba(115, 133, 163, 0.2);
                --status-planned-text: #344862;
                --impact-low-bg: rgba(15, 135, 201, 0.14);
                --impact-low-text: #0c597f;
                --impact-medium-bg: rgba(86, 115, 216, 0.14);
                --impact-medium-text: #2f469f;
                --impact-high-bg: rgba(131, 92, 220, 0.18);
                --impact-high-text: #452796;
                --friction-high-bg: rgba(200, 74, 89, 0.18);
                --friction-high-text: #8b2431;
            }
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: "Inter", "Segoe UI", sans-serif;
            color: var(--text);
            background:
                radial-gradient(circle at 15% 20%, var(--radial-1), transparent 30%),
                radial-gradient(circle at 85% 80%, var(--radial-2), transparent 30%),
                var(--bg);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .wrap {
            max-width: 1280px;
            margin: 0 auto;
            padding: 28px 20px 60px;
            width: 100%;
        }

        .hero {
            border: 1px solid var(--line);
            border-radius: var(--radius);
            padding: 22px;
            background: linear-gradient(140deg, var(--hero-grad-a), var(--hero-grad-b));
            margin-bottom: 22px;
        }

        .nav-links {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .nav-links a {
            color: var(--link-text);
            text-decoration: none;
            border: 1px solid var(--line);
            border-radius: 999px;
            padding: 6px 12px;
            font-size: 0.82rem;
            background: var(--link-bg);
        }

        .nav-links a:hover {
            border-color: var(--accent);
            box-shadow: 0 0 0 2px var(--ring);
        }

        h1 {
            margin: 0 0 8px;
            font-size: clamp(1.5rem, 2vw, 2.2rem);
        }

        .sub {
            margin: 0;
            color: var(--muted);
        }

        .grid {
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            gap: 18px;
            margin-bottom: 20px;
            width: 100%;
            align-items: stretch;
        }

        .panel {
            background: var(--bg-soft);
            border: 1px solid var(--line);
            border-radius: var(--radius);
            padding: 16px;
            min-width: 0;
        }

        .panel h2 {
            margin: 0 0 12px;
            font-size: 1.05rem;
        }

        .chart-box {
            position: relative;
            height: 360px;
            width: 100%;
        }

        .chart-box-sm {
            height: 360px;
        }

        .chart-box canvas {
            position: absolute;
            inset: 0;
            width: 100% !important;
            height: 100% !important;
            display: block;
        }

        .legend {
            display: grid;
            gap: 8px;
            margin-top: 14px;
            color: var(--muted);
            font-size: 0.9rem;
        }

        .legend span {
            display: inline-flex;
            width: 10px;
            height: 10px;
            border-radius: 999px;
            margin-right: 8px;
        }

        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 14px;
        }

        .filter-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 10px;
            align-items: center;
        }

        .filter-label {
            font-size: 0.82rem;
            color: var(--muted);
            font-weight: 600;
        }

        button {
            background: var(--button-bg);
            color: var(--text);
            border: 1px solid var(--line);
            border-radius: 999px;
            padding: 8px 12px;
            font-weight: 600;
            cursor: pointer;
        }

        button.active {
            border-color: var(--accent);
            box-shadow: 0 0 0 2px var(--ring);
        }

        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 12px;
            width: 100%;
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--line);
            border-radius: 12px;
            padding: 12px;
            transition: background 0.2s ease, border-color 0.2s ease;
            display: flex;
            flex-direction: column;
        }

        .card:hover {
            background: var(--bg-hover);
            border-color: var(--hover-border);
        }

        .card h3 {
            margin: 0 0 6px;
            font-size: 1rem;
        }

        .card-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .top-meta {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: 0.01em;
            text-transform: uppercase;
        }

        .top-meta .dot {
            width: 7px;
            height: 7px;
            border-radius: 999px;
            display: inline-block;
        }

        .top-meta.horizon.foundation { color: var(--pill-foundation-text); }
        .top-meta.horizon.foundation .dot { background: var(--pill-foundation-text); }
        .top-meta.horizon.acceleration { color: var(--pill-acceleration-text); }
        .top-meta.horizon.acceleration .dot { background: var(--pill-acceleration-text); }
        .top-meta.horizon.scaling { color: var(--pill-scaling-text); }
        .top-meta.horizon.scaling .dot { background: var(--pill-scaling-text); }
        .top-meta.horizon.innovation { color: var(--pill-innovation-text); }
        .top-meta.horizon.innovation .dot { background: var(--pill-innovation-text); }

        .top-meta.status.status-implemented { color: var(--status-implemented-text); }
        .top-meta.status.status-implemented .dot { background: var(--status-implemented-text); }
        .top-meta.status.status-in-progress { color: var(--status-progress-text); }
        .top-meta.status.status-in-progress .dot { background: var(--status-progress-text); }
        .top-meta.status.status-planned { color: var(--status-planned-text); }
        .top-meta.status.status-planned .dot { background: var(--status-planned-text); }
        .top-meta.status {
            flex-direction: row-reverse;
        }

        .meta {
            display: flex;
            gap: 8px;
            font-size: 0.82rem;
            color: var(--muted);
            margin-top: auto;
            margin-bottom: 0;
            flex-wrap: wrap;
            align-items: center;
        }

        .track {
            font-size: 0.82rem;
            color: var(--muted);
            margin-bottom: 8px;
        }

        .pill {
            display: inline-block;
            font-size: 0.75rem;
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 999px;
            margin-bottom: 0;
            white-space: nowrap;
        }

        .pill.foundation { background: var(--pill-foundation-bg); color: var(--pill-foundation-text); }
        .pill.acceleration { background: var(--pill-acceleration-bg); color: var(--pill-acceleration-text); }
        .pill.scaling { background: var(--pill-scaling-bg); color: var(--pill-scaling-text); }
        .pill.innovation { background: var(--pill-innovation-bg); color: var(--pill-innovation-text); }
        .pill.impact-low { background: var(--impact-low-bg); color: var(--impact-low-text); }
        .pill.impact-medium { background: var(--impact-medium-bg); color: var(--impact-medium-text); }
        .pill.impact-high { background: var(--impact-high-bg); color: var(--impact-high-text); }
        .pill.friction-low { background: var(--pill-foundation-bg); color: var(--pill-foundation-text); }
        .pill.friction-medium { background: var(--pill-acceleration-bg); color: var(--pill-acceleration-text); }
        .pill.friction-high { background: var(--friction-high-bg); color: var(--friction-high-text); }
        .pill.status-implemented { background: var(--status-implemented-bg); color: var(--status-implemented-text); border: 1px solid rgba(56, 189, 248, 0.45); }
        .pill.status-in-progress { background: var(--status-progress-bg); color: var(--status-progress-text); border: 1px solid rgba(57, 208, 255, 0.45); }
        .pill.status-planned { background: var(--status-planned-bg); color: var(--status-planned-text); border: 1px solid rgba(100, 116, 139, 0.45); }

        .small {
            color: var(--muted);
            font-size: 0.86rem;
            margin: 0;
        }

        .metric-pill {
            display: inline-block;
            border-radius: 999px;
            padding: 3px 8px;
            font-size: 0.75rem;
            font-weight: 700;
            border: 1px solid var(--line);
            line-height: 1.2;
        }

        .metric-pill.impact.low { background: var(--impact-low-bg); color: var(--impact-low-text); }
        .metric-pill.impact.medium { background: var(--impact-medium-bg); color: var(--impact-medium-text); }
        .metric-pill.impact.high { background: var(--impact-high-bg); color: var(--impact-high-text); }

        .metric-pill.friction.low {
            background: var(--pill-foundation-bg);
            color: var(--pill-foundation-text);
        }

        .metric-pill.friction.medium {
            background: var(--pill-acceleration-bg);
            color: var(--pill-acceleration-text);
        }

        .metric-pill.friction.high { background: var(--friction-high-bg); color: var(--friction-high-text); }

        .card-body {
            flex: 1;
            margin-bottom: 10px;
        }

        .guide-row {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
        }

        .guide-label {
            color: var(--muted);
            font-size: 0.84rem;
            font-weight: 600;
        }

        .live-list {
            margin: 0;
            padding-left: 18px;
            color: var(--muted);
            line-height: 1.6;
        }

        @media (max-width: 1100px) {
            .grid {
                grid-template-columns: 1fr;
            }

            .chart-box {
                height: 320px;
            }
        }

        @media (max-width: 760px) {
            .wrap {
                padding: 16px 12px 40px;
            }

            .panel {
                padding: 12px;
            }

            .panel h2 {
                font-size: 1rem;
            }

            .chart-box {
                height: 260px;
            }

            .cards {
                grid-template-columns: 1fr;
            }

            .card {
                padding: 10px;
            }

            .small {
                font-size: 0.82rem;
            }
        }
    </style>
</head>

<body>
    <div class="wrap">
        <header class="hero">
            <h1>Heimdallr Radiology Pipeline Strategy</h1>
            <p class="sub">Impact vs implementation friction for upcoming modules across logistics, triage, reporting, de-identification, and patient navigation.</p>
            <div class="nav-links">
                <a href="./index.html">Open Docs Hub</a>
                <a href="./pipeline-strategy.html">Open Strategy Board</a>
                <a href="./motivation-justification.html">Open Motivation Guide</a>
                <a href="./radiology-preprocessing-ecosystem-report.html">Open Full Report</a>
                <a href="https://github.com/rod-americo/Heimdallr/blob/main/README.md">Open README</a>
            </div>
        </header>

        <section class="grid">
            <article class="panel">
                <h2>Priority Matrix</h2>
                <div class="chart-box">
                    <canvas id="priorityChart"></canvas>
                </div>
                <div class="legend">
                    <div><span style="background: var(--good);"></span>Low friction / quick wins</div>
                    <div><span style="background: var(--mid);"></span>Medium complexity / phased delivery</div>
                    <div><span style="background: var(--hard);"></span>High complexity / governance-heavy</div>
                </div>
                <p class="small" style="margin-top: 8px;">Friction is an implementation-in-production score (integration, validation, compliance, and operational change), not just model difficulty.</p>
            </article>

            <article class="panel">
                <h2>Focus Split</h2>
                <div class="chart-box chart-box-sm">
                    <canvas id="focusChart"></canvas>
                </div>
                <p class="small">Balanced investment keeps operations stable while advancing high-impact clinical AI capabilities.</p>
            </article>
        </section>

        <section class="panel">
            <h2>What Is Live Today</h2>
            <ul id="liveToday" class="live-list"></ul>
        </section>

        <section class="panel" style="margin-top: 14px;">
            <h2>Module Explorer</h2>
            <div class="filter-group">
                <span class="filter-label">Track:</span>
                <button class="active" data-group="track" data-filter="all">All</button>
                <button data-group="track" data-filter="ops">Operations</button>
                <button data-group="track" data-filter="clinical">Clinical AI</button>
                <button data-group="track" data-filter="governance">Governance</button>
                <button data-group="track" data-filter="continuity">Care Continuity</button>
            </div>
            <div class="filter-group">
                <span class="filter-label">Status:</span>
                <button class="active" data-group="status" data-filter="all">All</button>
                <button data-group="status" data-filter="implemented">Implemented</button>
                <button data-group="status" data-filter="in-progress">In Progress</button>
                <button data-group="status" data-filter="planned">Planned</button>
            </div>
            <div id="cards" class="cards"></div>
        </section>

        <section class="panel" style="margin-top: 14px;">
            <h2>Metric Definitions</h2>
            <p class="small"><strong>Impact (1-10)</strong>: expected clinical and operational value if deployed safely.</p>
            <p class="small" style="margin-top: 6px;"><strong>Friction (1-10)</strong>: real-world effort to productionize safely, combining technical integration, data quality, clinical validation, governance/compliance, and change management.</p>
            <p class="small" style="margin-top: 6px;"><strong>Navigation</strong>: active follow-up monitoring by clinical service staff, with owner, due date, status tracking, and escalation until closure.</p>
            <p class="small" style="margin-top: 6px;"><strong>Status</strong>: implemented modules are already operational; in-progress modules are partially delivered; planned modules are roadmap targets.</p>
            <div class="guide-row" style="margin-top: 8px;">
                <span class="guide-label">Status legend:</span>
                <span class="pill status-implemented">implemented</span>
                <span class="pill status-in-progress">in progress</span>
                <span class="pill status-planned">planned</span>
            </div>
            <p class="small" style="margin-top: 10px;"><strong>Horizon Legend</strong>:</p>
            <p class="small" style="margin-top: 6px;"><span class="pill foundation">foundation</span> baseline safety, interoperability, and throughput foundation for production readiness.</p>
            <p class="small" style="margin-top: 6px;"><span class="pill acceleration">acceleration</span> modules that increase clinical/operational performance on top of a stable base.</p>
            <p class="small" style="margin-top: 6px;"><span class="pill scaling">scaling</span> expansion of proven workflows to larger volume, services, and operational coverage.</p>
            <p class="small" style="margin-top: 6px;"><span class="pill innovation">innovation</span> long-horizon capabilities with higher uncertainty and strategic upside.</p>
            <div class="guide-row">
                <span class="guide-label">Impact bands:</span>
                <span class="pill impact-low">1-3 low</span>
                <span class="pill impact-medium">4-6 medium</span>
                <span class="pill impact-high">7-10 high</span>
            </div>
            <div class="guide-row">
                <span class="guide-label">Friction bands:</span>
                <span class="pill friction-low">1-3 low</span>
                <span class="pill friction-medium">4-6 medium</span>
                <span class="pill friction-high">7-10 high</span>
            </div>
        </section>

        <section class="panel" style="margin-top: 14px;">
            <h2>Where to Go Next</h2>
            <p class="small">Use these links to continue from strategy design into project context and implementation motivation.</p>
            <div class="nav-links" style="margin-top: 10px;">
                <a href="./index.html">Docs Hub</a>
                <a href="./pipeline-strategy.html">Strategy Board</a>
                <a href="./motivation-justification.html">Motivation & Justification</a>
                <a href="./radiology-preprocessing-ecosystem-report.html">Research Report (EN)</a>
                <a href="https://github.com/rod-americo/Heimdallr/blob/main/README.md">README.md</a>
            </div>
        </section>
    </div>

    <script>
        const modules = [
            { id: 1, title: 'DICOM C-STORE Intake Listener', track: 'ops', horizon: 'foundation', status: 'implemented', impact: 8, friction: 3, note: 'Production listener for PACS/modality intake.' },
            { id: 2, title: 'Case Prep and Queue Worker', track: 'ops', horizon: 'foundation', status: 'implemented', impact: 8, friction: 4, note: 'Automated DICOM selection, NIfTI conversion, and queued processing flow.' },
            { id: 3, title: 'Dashboard + API Surface', track: 'ops', horizon: 'foundation', status: 'implemented', impact: 7, friction: 3, note: 'FastAPI endpoints and operational dashboard already serving case workflows.' },
            { id: 4, title: 'HL7-Triggered Smart Prefetch', track: 'ops', horizon: 'foundation', status: 'planned', impact: 8, friction: 4, note: 'Route relevant priors from ADT/ORM events using study similarity scoring.' },
            { id: 5, title: 'Unified Worklist Orchestrator', track: 'ops', horizon: 'foundation', status: 'planned', impact: 7, friction: 5, note: 'Fair case assignment by subspecialty, workload, and SLA risk.' },
            { id: 6, title: 'SLA Policy Engine', track: 'ops', horizon: 'foundation', status: 'planned', impact: 6, friction: 4, note: 'Alert and escalate when breach risk increases for urgent studies.' },

            { id: 7, title: 'AP Chest X-ray Assist APIs', track: 'clinical', horizon: 'foundation', status: 'implemented', impact: 7, friction: 3, note: 'Anthropic and MedGemma assistant flows integrated through server endpoints.' },
            { id: 8, title: 'TotalSegmentator Core Pipeline', track: 'clinical', horizon: 'foundation', status: 'implemented', impact: 8, friction: 4, note: 'Robust segmentation backbone powering multi-structure quantitative workflows.' },
            { id: 9, title: 'L3 Muscle Area + SMI Calculator', track: 'clinical', horizon: 'foundation', status: 'implemented', impact: 8, friction: 4, note: 'Measures muscle area at L3 and calculates SMI using patient height input.' },
            { id: 10, title: 'Automated Organ Volumetry', track: 'clinical', horizon: 'foundation', status: 'implemented', impact: 8, friction: 5, note: 'Automatic organ volumetry from segmentation outputs for structured reporting and analytics.' },
            { id: 11, title: 'Intracranial Hemorrhage Detection', track: 'clinical', horizon: 'acceleration', status: 'implemented', impact: 9, friction: 5, note: 'Operational ICH detection integrated into the preprocessing/triage flow.' },
            { id: 12, title: 'Structured Report Copilot', track: 'clinical', horizon: 'acceleration', status: 'in-progress', impact: 7, friction: 6, note: 'Template-bound drafting from findings and quantitative metrics.' },
            { id: 13, title: 'Urgency Flagging and Reordering', track: 'clinical', horizon: 'acceleration', status: 'planned', impact: 9, friction: 8, note: 'Reprioritize suspected critical findings with auditable thresholds.' },
            { id: 14, title: 'Opportunistic Liver Quant', track: 'clinical', horizon: 'acceleration', status: 'planned', impact: 7, friction: 6, note: 'Steatosis risk extraction from routine CT studies.' },
            { id: 15, title: 'Opportunistic Bone Quant', track: 'clinical', horizon: 'acceleration', status: 'planned', impact: 6, friction: 6, note: 'Vertebral volumetric HU proxy for osteoporosis triage.' },
            { id: 16, title: 'CAC-DRS Calcium Classification', track: 'clinical', horizon: 'acceleration', status: 'planned', impact: 7, friction: 6, note: 'Structured coronary calcium classification workflow using CAC-DRS in eligible CT studies.' },
            { id: 17, title: 'Hippocampal Volumetry Project', track: 'clinical', horizon: 'scaling', status: 'in-progress', impact: 8, friction: 7, note: 'Longitudinal hippocampal volumetry project for neurodegeneration-oriented workflows.' },
            { id: 18, title: 'Emphysema Longitudinal Quant', track: 'clinical', horizon: 'scaling', status: 'planned', impact: 5, friction: 7, note: 'LAA%-based burden tracking and trend summaries.' },
            { id: 19, title: 'Agentic Workflow Coordinator', track: 'clinical', horizon: 'innovation', status: 'planned', impact: 8, friction: 9, note: 'Multi-step assistants for triage, reporting, and handoff execution.' },

            { id: 20, title: 'De-identification Gateway', track: 'governance', horizon: 'scaling', status: 'planned', impact: 9, friction: 7, note: 'Pixel + metadata PHI stripping before any external model call.' },
            { id: 21, title: 'Federated Learning Sandbox', track: 'governance', horizon: 'innovation', status: 'planned', impact: 6, friction: 8, note: 'Cross-site training design without centralizing raw images.' },

            { id: 22, title: 'Patient Follow-up Navigator', track: 'continuity', horizon: 'scaling', status: 'planned', impact: 8, friction: 5, note: 'Extract recommendations and orchestrate reminders/escalations.' },
            { id: 23, title: 'Urology Navigation Module', track: 'continuity', horizon: 'scaling', status: 'planned', impact: 8, friction: 6, note: 'Active service-led tracking for urology navigable findings, with secondary routing to oncology when neoplasm is suspected.' }
        ];

        const trackName = {
            ops: 'Operations',
            clinical: 'Clinical AI',
            governance: 'Governance',
            continuity: 'Care Continuity'
        };

        const cards = document.getElementById('cards');
        const liveToday = document.getElementById('liveToday');
        const filterButtons = [...document.querySelectorAll('button[data-group][data-filter]')];
        const isMobile = window.matchMedia('(max-width: 760px)').matches;
        const css = getComputedStyle(document.documentElement);
        const chartText = css.getPropertyValue('--chart-text').trim();
        const chartAxis = css.getPropertyValue('--chart-axis').trim();
        const chartGrid = css.getPropertyValue('--chart-grid').trim();
        const chartBorder = css.getPropertyValue('--chart-border').trim();
        const bubbleGood = css.getPropertyValue('--bubble-good').trim();
        const bubbleMid = css.getPropertyValue('--bubble-mid').trim();
        const bubbleHard = css.getPropertyValue('--bubble-hard').trim();
        const focus1 = css.getPropertyValue('--focus-1').trim();
        const focus2 = css.getPropertyValue('--focus-2').trim();
        const focus3 = css.getPropertyValue('--focus-3').trim();
        const focus4 = css.getPropertyValue('--focus-4').trim();
        let activeTrackFilter = 'all';
        let activeStatusFilter = 'all';

        function frictionBand(v) {
            if (v <= 3) return 'low';
            if (v <= 6) return 'medium';
            return 'high';
        }

        function impactBand(v) {
            if (v <= 3) return 'low';
            if (v <= 6) return 'medium';
            return 'high';
        }

        function statusLabel(v) {
            if (v === 'implemented') return 'implemented';
            if (v === 'in-progress') return 'in progress';
            return 'planned';
        }

        function filterModules() {
            return modules.filter((m) => {
                const trackMatch = activeTrackFilter === 'all' || m.track === activeTrackFilter;
                const statusMatch = activeStatusFilter === 'all' || m.status === activeStatusFilter;
                return trackMatch && statusMatch;
            });
        }

        function renderLiveToday() {
            liveToday.innerHTML = '';
            modules
                .filter((m) => m.status === 'implemented')
                .forEach((m) => {
                    const li = document.createElement('li');
                    li.textContent = `${m.title}: ${m.note}`;
                    liveToday.appendChild(li);
                });
        }

        function renderCards() {
            cards.innerHTML = '';
            const list = filterModules();
            list.forEach((m) => {
                const el = document.createElement('article');
                el.className = 'card';
                el.innerHTML = `
                    <div class="card-top">
                        <span class="top-meta horizon ${m.horizon}"><span class="dot"></span>${m.horizon}</span>
                        <span class="top-meta status status-${m.status}"><span class="dot"></span>${statusLabel(m.status)}</span>
                    </div>
                    <h3>${m.title}</h3>
                    <div class="track">${trackName[m.track]}</div>
                    <div class="card-body">
                        <p class="small">${m.note}</p>
                    </div>
                    <div class="meta">
                        <span class="metric-pill impact ${impactBand(m.impact)}">Impact ${m.impact}/10</span>
                        <span class="metric-pill friction ${frictionBand(m.friction)}">Friction ${m.friction}/10</span>
                    </div>
                `;
                cards.appendChild(el);
            });
        }

        filterButtons.forEach((btn) => {
            btn.addEventListener('click', () => {
                const group = btn.dataset.group;
                const value = btn.dataset.filter;
                filterButtons
                    .filter((b) => b.dataset.group === group)
                    .forEach((b) => b.classList.remove('active'));
                btn.classList.add('active');
                if (group === 'track') activeTrackFilter = value;
                if (group === 'status') activeStatusFilter = value;
                renderCards();
            });
        });

        const priorityChart = new Chart(document.getElementById('priorityChart'), {
            type: 'bubble',
            data: {
                datasets: [
                    {
                        label: 'Implemented',
                        data: modules.filter((m) => m.status === 'implemented').map((m) => ({ x: m.friction, y: m.impact, r: 10, title: m.title, status: m.status })),
                        backgroundColor: modules.filter((m) => m.status === 'implemented').map((m) => {
                            if (m.friction <= 4) return bubbleGood;
                            if (m.friction <= 7) return bubbleMid;
                            return bubbleHard;
                        }),
                        borderColor: chartBorder,
                        borderWidth: 2
                    },
                    {
                        label: 'In Progress',
                        data: modules.filter((m) => m.status === 'in-progress').map((m) => ({ x: m.friction, y: m.impact, r: 10, title: m.title, status: m.status })),
                        backgroundColor: modules.filter((m) => m.status === 'in-progress').map((m) => {
                            if (m.friction <= 4) return bubbleGood;
                            if (m.friction <= 7) return bubbleMid;
                            return bubbleHard;
                        }),
                        borderColor: chartBorder,
                        borderWidth: 2
                    },
                    {
                        label: 'Planned',
                        data: modules.filter((m) => m.status === 'planned').map((m) => ({ x: m.friction, y: m.impact, r: 10, title: m.title, status: m.status })),
                        backgroundColor: modules.filter((m) => m.status === 'planned').map((m) => {
                            if (m.friction <= 4) return bubbleGood;
                            if (m.friction <= 7) return bubbleMid;
                            return bubbleHard;
                        }),
                        borderColor: chartBorder,
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                layout: {
                    padding: isMobile ? 6 : 10
                },
                plugins: {
                    legend: {
                        position: 'top',
                        labels: { color: chartText, usePointStyle: true, pointStyle: 'circle' }
                    },
                    tooltip: {
                        callbacks: {
                            label: (ctx) => `${ctx.raw.title} | ${ctx.raw.status} | Impact ${ctx.raw.y} | Friction ${ctx.raw.x}`
                        }
                    }
                },
                scales: {
                    x: {
                        type: 'linear',
                        min: 0,
                        max: 10,
                        title: { display: !isMobile, text: 'Implementation Friction', color: chartAxis },
                        ticks: { color: chartText, maxTicksLimit: isMobile ? 6 : 11 },
                        grid: { color: chartGrid }
                    },
                    y: {
                        type: 'linear',
                        min: 0,
                        max: 10,
                        title: { display: !isMobile, text: 'Clinical/Operational Impact', color: chartAxis },
                        ticks: { color: chartText, maxTicksLimit: isMobile ? 6 : 11 },
                        grid: { color: chartGrid }
                    }
                }
            }
        });

        const focusBreakdown = modules.reduce((acc, m) => {
            acc[m.track] = (acc[m.track] || 0) + 1;
            return acc;
        }, {});

        const focusChart = new Chart(document.getElementById('focusChart'), {
            type: 'doughnut',
            data: {
                labels: Object.keys(focusBreakdown).map((k) => trackName[k]),
                datasets: [{
                    data: Object.values(focusBreakdown),
                    backgroundColor: [focus1, focus2, focus3, focus4],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                layout: {
                    padding: isMobile ? 2 : 8
                },
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: chartText,
                            usePointStyle: true,
                            pointStyle: 'rect',
                            boxWidth: isMobile ? 10 : 12,
                            padding: isMobile ? 8 : 12,
                            font: {
                                size: isMobile ? 11 : 13
                            }
                        }
                    }
                }
            }
        });

        renderLiveToday();
        renderCards();
    </script>
</body>

</html>
